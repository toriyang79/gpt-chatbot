## 프로젝트 개요
Django와 OpenAI SDK를 활용하여 ChatGPT와 유사한 대화형 AI 서비스를 구축합니다.

## 환경 설정

### 1. 가상환경 활성화
```bash
conda activate gpt
```

### 2. 필수 라이브러리 설치
- Django
- openai (pip install openai)
- python-dotenv (환경변수 관리)
- 기타 필요 라이브러리

### 3. 환경변수 설정
`.env` 파일에 OpenAI API 키 저장:
```
OPENAI_API_KEY=your_api_key_here
```

## 프로젝트 구조

### 1. Django 프로젝트 생성
- 프로젝트 및 앱 생성
- 설정 디렉토리 명은 config로 할 것
- settings.py 환경변수 설정
- static 및 templates 디렉토리 구성

### 2. 데이터베이스 모델 설계

#### User 모델 (Django 기본 활용)

#### Conversation 모델
- user (ForeignKey)
- title (대화 제목)
- created_at
- updated_at
- is_active

#### Message 모델
- conversation (ForeignKey)
- role (user/assistant)
- content
- created_at

## 주요 기능 구현

### 1. 인증 시스템
- 회원가입 페이지
- 로그인/로그아웃
- 세션 관리
- 비로그인 사용자 리다이렉트

### 2. 대화 관리 시스템

#### 새 대화 시작
- "New Chat" 버튼
- 자동 제목 생성 (첫 메시지 기반)
- 대화 ID 생성 및 세션 저장

#### 대화 목록 (사이드바)
- 사용자별 대화 목록 표시
- 최신순 정렬
- 대화 제목 표시
- 클릭 시 해당 대화 로드

#### 대화 이어하기
- 선택한 대화의 메시지 히스토리 로드
- 컨텍스트 유지하여 API 호출
- 새 메시지 추가 및 저장

### 3. OpenAI API 통합

#### API 호출 구조
- 시스템 프롬프트: 빈 문자열 ("")
- 대화 히스토리 포함하여 요청
- 스트리밍 응답 처리 (선택사항)
- 에러 핸들링

#### 메시지 처리 흐름
1. 사용자 입력 수신
2. 현재 대화의 전체 히스토리 조회
3. OpenAI API 호출
4. 응답 수신 및 DB 저장
5. 프론트엔드 업데이트

## UI/UX 디자인 (Bootstrap 5)

### 1. 레이아웃 구조
- **사이드바 (왼쪽)**
  - 로고/타이틀
  - "New Chat" 버튼
  - 대화 목록
  - 사용자 정보/로그아웃

- **메인 채팅 영역 (중앙)**
  - 메시지 표시 영역
  - 입력 필드 (하단 고정)
  - 전송 버튼

### 2. ChatGPT 스타일 구현
- 어두운 테마 옵션
- 메시지 버블 디자인
- 코드 블록 하이라이팅
- 마크다운 렌더링
- 반응형 디자인

### 3. 주요 CSS 클래스 구조
- 사이드바: 고정 너비, 스크롤 가능
- 메시지 영역: 플렉스박스, 자동 스크롤
- 입력 영역: 하단 고정, 자동 높이 조절

## 보안 고려사항

### 1. API 키 보호
- 환경변수 사용
- 클라이언트 노출 방지
- 서버 사이드 처리

### 2. 사용자 인증
- CSRF 토큰
- 세션 보안
- 비밀번호 암호화

### 3. 데이터 보호
- 사용자별 데이터 격리
- SQL 인젝션 방지
- XSS 공격 방지

## 추가 기능 (선택사항)

### 1. 대화 관리
- 대화 삭제
- 대화 이름 변경
- 대화 검색

### 2. 사용자 설정
- 프로필 관리
- 테마 설정 저장
- API 사용량 표시

### 3. 고급 기능
- 파일 업로드
- 이미지 생성 (DALL-E)
- 대화 내보내기/가져오기

## 배포 준비

### 1. 프로덕션 설정
- DEBUG = False
- ALLOWED_HOSTS 설정
- 정적 파일 수집
- 데이터베이스 마이그레이션

### 2. 성능 최적화
- 캐싱 구현
- 비동기 처리
- 데이터베이스 인덱싱

### 3. 모니터링
- 에러 로깅
- API 사용량 추적
- 사용자 활동 모니터링

## 테스트 체크리스트

- [ ] 회원가입/로그인 프로세스
- [ ] 새 대화 생성
- [ ] 메시지 송수신
- [ ] 대화 히스토리 로드
- [ ] 대화 전환
- [ ] 로그아웃 및 세션 관리
- [ ] 반응형 디자인 확인
- [ ] API 에러 처리